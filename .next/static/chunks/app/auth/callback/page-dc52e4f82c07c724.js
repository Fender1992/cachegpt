(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{63:(e,r,t)=>{"use strict";var i=t(7260);t.o(i,"useRouter")&&t.d(r,{useRouter:function(){return i.useRouter}})},2855:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});var i=t(5040);let a="https://slxgfzlralwbpzafbufm.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNseGdmemxyYWx3YnB6YWZidWZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzgwMzQsImV4cCI6MjA3MzU1NDAzNH0.0TRSpP_OxAde0WkVXJohGWIqlJ2CdpiYt6FAh2lz1so",s=a&&o?(0,i.UU)(a,o):(()=>{let e="Supabase is not configured. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.";return{auth:{getUser:()=>Promise.reject(Error(e)),signInWithPassword:()=>Promise.reject(Error(e)),signUp:()=>Promise.reject(Error(e)),signOut:()=>Promise.reject(Error(e)),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),getSession:()=>Promise.reject(Error(e))},from:()=>({select:()=>Promise.reject(Error(e)),insert:()=>Promise.reject(Error(e)),update:()=>Promise.reject(Error(e)),delete:()=>Promise.reject(Error(e))}),rpc:()=>Promise.reject(Error(e))}})();a&&o||console.error("Missing required Supabase environment variables.","\nNEXT_PUBLIC_SUPABASE_URL:",a?"Set":"Missing","\nNEXT_PUBLIC_SUPABASE_ANON_KEY:",o?"Set (hidden)":"Missing","\n\nFor Vercel deployment:","\n1. Go to your Vercel project settings","\n2. Navigate to Environment Variables","\n3. Add both variables for Production environment","\n4. Redeploy your application")},4369:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var i=t(5155),a=t(2115),o=t(63),s=t(2855);function n(){let e=(0,o.useRouter)();return(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:p},error:_}=await s.N.auth.getSession();if(_){console.error("Error during auth callback:",_),e.push("/login?error=callback_failed");return}if(p){var r,t,i,a,o,n,l,d,u,c,m;let _=p.user,{data:v,error:f}=await s.N.from("user_profiles").select("*").eq("id",_.id).single();if(f&&"PGRST116"===f.code){let{error:e}=await s.N.from("user_profiles").insert({id:_.id,email:_.email,full_name:(null==(a=_.user_metadata)?void 0:a.full_name)||(null==(o=_.user_metadata)?void 0:o.name)||(null==(n=_.email)?void 0:n.split("@")[0]),avatar_url:(null==(l=_.user_metadata)?void 0:l.avatar_url)||(null==(d=_.user_metadata)?void 0:d.picture),provider:(null==(u=_.app_metadata)?void 0:u.provider)||"email",provider_id:(null==(c=_.user_metadata)?void 0:c.provider_id)||_.id,email_verified:!!_.email_confirmed_at,last_login_at:new Date().toISOString()});e&&console.error("Error creating user profile:",e)}else!f&&v&&await s.N.from("user_profiles").update({last_login_at:new Date().toISOString()}).eq("id",_.id);(null==(r=_.app_metadata)?void 0:r.provider)&&"email"!==_.app_metadata.provider&&await s.N.from("oauth_providers").upsert({user_id:_.id,provider:_.app_metadata.provider,provider_user_id:(null==(m=_.user_metadata)?void 0:m.provider_id)||_.id,provider_data:_.user_metadata||{},updated_at:new Date().toISOString()},{onConflict:"user_id,provider"}),await s.N.from("usage").insert({user_id:_.id,endpoint:"/auth/callback",method:"POST",model:(null==(t=_.app_metadata)?void 0:t.provider)||"email",metadata:{provider:(null==(i=_.app_metadata)?void 0:i.provider)||"email",event:"login"}}),e.push("/")}else e.push("/login")}catch(r){console.error("Unexpected error during auth callback:",r),e.push("/login?error=unexpected")}})()},[e]),(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-white mb-2",children:"Authenticating..."}),(0,i.jsx)("p",{className:"text-gray-400",children:"Please wait while we complete your sign in."})]})})}},8353:(e,r,t)=>{Promise.resolve().then(t.bind(t,4369))}},e=>{e.O(0,[659,441,255,358],()=>e(e.s=8353)),_N_E=e.O()}]);