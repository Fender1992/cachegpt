(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{63:(e,r,a)=>{"use strict";var i=a(7260);a.o(i,"useRouter")&&a.d(r,{useRouter:function(){return i.useRouter}})},2855:(e,r,a)=>{"use strict";a.d(r,{N:()=>d});var i=a(5040);let t="https://slxgfzlralwbpzafbufm.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNseGdmemxyYWx3YnB6YWZidWZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NzgwMzQsImV4cCI6MjA3MzU1NDAzNH0.0TRSpP_OxAde0WkVXJohGWIqlJ2CdpiYt6FAh2lz1so",d=t&&l?(0,i.UU)(t,l):null;t&&l||console.error("Missing required Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set in your .env.local file.")},4369:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var i=a(5155),t=a(2115),l=a(63),d=a(2855);function o(){let e=(0,l.useRouter)();return(0,t.useEffect)(()=>{(async()=>{try{let{data:{session:c},error:_}=await d.N.auth.getSession();if(_){console.error("Error during auth callback:",_),e.push("/login?error=callback_failed");return}if(c){var r,a,i,t,l,o,s,n,u,p,m;let _=c.user,{data:v,error:f}=await d.N.from("user_profiles").select("*").eq("id",_.id).single();if(f&&"PGRST116"===f.code){let{error:e}=await d.N.from("user_profiles").insert({id:_.id,email:_.email,full_name:(null==(t=_.user_metadata)?void 0:t.full_name)||(null==(l=_.user_metadata)?void 0:l.name)||(null==(o=_.email)?void 0:o.split("@")[0]),avatar_url:(null==(s=_.user_metadata)?void 0:s.avatar_url)||(null==(n=_.user_metadata)?void 0:n.picture),provider:(null==(u=_.app_metadata)?void 0:u.provider)||"email",provider_id:(null==(p=_.user_metadata)?void 0:p.provider_id)||_.id,email_verified:!!_.email_confirmed_at,last_login_at:new Date().toISOString()});e&&console.error("Error creating user profile:",e)}else!f&&v&&await d.N.from("user_profiles").update({last_login_at:new Date().toISOString()}).eq("id",_.id);(null==(r=_.app_metadata)?void 0:r.provider)&&"email"!==_.app_metadata.provider&&await d.N.from("oauth_providers").upsert({user_id:_.id,provider:_.app_metadata.provider,provider_user_id:(null==(m=_.user_metadata)?void 0:m.provider_id)||_.id,provider_data:_.user_metadata||{},updated_at:new Date().toISOString()},{onConflict:"user_id,provider"}),await d.N.from("usage").insert({user_id:_.id,endpoint:"/auth/callback",method:"POST",model:(null==(a=_.app_metadata)?void 0:a.provider)||"email",metadata:{provider:(null==(i=_.app_metadata)?void 0:i.provider)||"email",event:"login"}}),e.push("/")}else e.push("/login")}catch(r){console.error("Unexpected error during auth callback:",r),e.push("/login?error=unexpected")}})()},[e]),(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-white mb-2",children:"Authenticating..."}),(0,i.jsx)("p",{className:"text-gray-400",children:"Please wait while we complete your sign in."})]})})}},8353:(e,r,a)=>{Promise.resolve().then(a.bind(a,4369))}},e=>{e.O(0,[659,441,255,358],()=>e(e.s=8353)),_N_E=e.O()}]);